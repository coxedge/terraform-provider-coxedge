---

# generated by https://github.com/hashicorp/terraform-plugin-docs

page_title: "coxedge_workload Resource - terraform-provider-coxedge"
subcategory: ""
description: Cox Edge Computing uses the concept of workloads to organize different applications. A workload can consist
of one container or virtual machine image that is deployed to one or many locations. Deploy and manage your workloads.
  
---

# coxedge_workload (Resource)

Cox Edge Computing uses the concept of workloads to organize different applications. A workload can consist of one
container or virtual machine image that is deployed to one or many locations. Deploy and manage your workloads.

Example Usage
---

```
terraform {
  required_providers {
    coxedge = {
      version = "0.4.9"
      source  = "coxedge/coxedge"
    
  }
}

provider "coxedge" {
  key = ["INSERT API KEY"]
}

data "coxedge_environments" "test" {

}

output "envs" {
  value = data.coxedge_environments.test
}
//to import existing workload which is created outside terraform script and to update state file.
//terraform import coxedge_workload.test <workload_id>:<environment_name>:<organization_id>

//to sync with UI changes.
//terraform apply --refresh-only

# Workloads
resource "coxedge_workload" "test" {
  name             = "name-of-the-container"
  organization_id  = "organization_id"
  environment_name = "name-of-the-environment"
  type             = "CONTAINER"
  image            = "bitnami/nginx"
  specs            = "SP-2"
  deployment {
    name               = "test"
    enable_autoscaling = false
    pops               = ["BTR"]
    instances_per_pop  = 1
  }
  probe_configuration = "LIVENESS_AND_READINESS"
  liveness_probe {
    initial_delay_seconds = 0
    timeout_seconds       = 1
    period_seconds        = 10
    success_threshold     = 1
    failure_threshold     = 3
    protocol              = "HTTP_GET"
    http_get {
      path   = "/health"
      port   = 80
      scheme = "HTTPS"
      http_headers {
        header_name  = "authorization"
        header_value = "123456"
      }
    }
  }
  readiness_probe {
    initial_delay_seconds = 0
    timeout_seconds       = 1
    period_seconds        = 10
    success_threshold     = 1
    failure_threshold     = 3
    protocol              = "TCP_SOCKET"
    tcp_socket {
      port = 22
    }
  }
  network_interfaces {
    vpc_slug     = "default"
    ip_families  = "IPv4"
    subnet_slug  = ""
    is_public_ip = true
  }
  timeouts { 
    create = "20m"
    update = "20m"
  }
}
```

<!-- schema generated by tfplugindocs -->

## Argument Reference

The following arguments are supported:

### Required

- `deployment` (Block List, Min: 1) (see [below for nested schema](#nestedblock--deployment)) - The list of deployment
  targets.
- `environment_name` (String) - The name of the environment.
- `image` (String) - The workload's instance operating system image.
- `name` (String) - The display name of the workload.
- `specs` (String) - Specification type for resources which are allocated to each instance in a workload.
- `type` (String) - Specify whether a workload is a VM-based workload or container-based.
- `network_interfaces` (Block List, Min: 1) (see [below for nested schema](#nestedblock--network_interfaces)) - The list
  of network_interfaces.

### Optional

- `add_anycast_ip_address` (Boolean) - Option to AnyCast IP Address.
- `anycast_ip_address` (String) - The Anycast IP address assigned to a workload. If there is no IP assigned to the
  workload then the value of this attribute will be ```None```.
- `commands` (List of String) - The commands that start a container. Only applicable to workloads of ```type``` '
  CONTAINER'.
- `container_email` (String) - The email address to use for the docker registry account. Only applicable to workloads
  of ```type``` 'CONTAINER' and ```addImagePullCredentialsOption``` is 'true'.
- `container_password` (String, Sensitive)
- `container_server` (String) - The server that the credentials should be used with. This value will default to the
  docker hub registry when not set. Only applicable to workloads of ```type``` 'CONTAINER'
  and ```addImagePullCredentialsOption``` is 'true'.
- `container_username` (String) - The username used to authenticate the image pull. Only applicable to workloads
  of ```type``` 'CONTAINER' and ```addImagePullCredentialsOption``` is 'true'.
- `environment_variables` (Map of String)
- `first_boot_ssh_key` (String)
- `persistent_storage` (Block List) (see [below for nested schema](#nestedblock--persistent_storage))
- `ports` (Block List) (see [below for nested schema](#nestedblock--ports))
- `secret_environment_variables` (Map of String)
- `slug` (String) - A workload's programmatic name. Workload slugs are used to build its instances names.
- `probe_configuration`  Values can be NONE, LIVENESS or LIVENESS_AND_READINESS
- `liveness_probe`  (Block List, Max: 1) (see [below for nested schema](#nestedblock--liveness_probe))
- `readiness_probe`  (Block List, Max: 1) (see [below for nested schema](#nestedblock--readiness_probe))
- `timeouts` (Block List, Min: 1) - Can pass custom timeout while create / update. Example: create = "20m" / update = "
  20m" - such as "60m" for 60 minutes, "10s" for ten seconds, or "2h" for two hours

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--deployment"></a>

### Nested Schema for `deployment`

Required:

- `name` (String) - The name of the deployment.
- `pops` (List of String) - The points of presence of a deployment. In the regex format ```[A-Z]{3, 3}```.

Optional:

- `cpu_utilization` (Number) - The percentage of CPU utilization. Only applicable if autoscaling is enabled.
- `enable_autoscaling` (Boolean) - Specifies if autoscaling is enabled. If enabled, then ```cpu_utilization```
  , ```min_instances_per_pop```, and ```max_instances_per_pop``` are shown.
- `instances_per_pop` (Number) - The number of instances per point of presence. Only applicable if autoscaling is not
  enabled.
- `max_instances_per_pop` (Number) - The maximum number of instances per PoP. Only applicable if autoscaling is enabled.
  Should be greater than zero and less than 50.
- `min_instances_per_pop` (Number) - The minimum number of instances per PoP. Only applicable if autoscaling is enabled.
  Should be greater than zero and less than 50.

<a id="nestedblock--persistent_storage"></a>

### Nested Schema for `persistent_storage`

Persistent storage volumes used by the workload.

Required:

- `path` (String) - The path in an instance to mount a volume.
- `size` (Number) - The size of the mounted volume (in GB).

<a id="nestedblock--ports"></a>

### Nested Schema for `ports`

A list of network interfaces that will be created for each workload instance.

Required:

- `protocol` (String) - Protocol for the network policy rule. Supported protocols are: ```TCP```, ```UDP```
  and ```TCP_UDP```.
- `public_port` (String) - A single port, such as 80 or a port range, such as 1024-65535 for which a network policy rule
  will be created for the workload.
- `public_port_desc` (String) - A summary of what the network policy rule does or a name for it. It is highly
  recommended to give a unique description to easily identify a network policy rule. Defaults to an empty string if not
  provided.
- `public_port_src` (String) - A subnet that will define all the IPs allowed by the network policy rule. Defaults to
  0.0.0.0/0 if not specified.

### Nested Schema for `liveness_probe`

Required:

- `initial_delay_seconds` (Number)
- `timeout_seconds` (Number)
- `period_seconds` (Number)
- `success_threshold` (Number)
- `failure_threshold` (Number)
- `protocol` (String) - Value can be TCP_SOCKET or HTTP_GET
- `tcp_socket` (Block list, Max: 1) - if protocol is set to TCP_SOCKET
- `http_get` (Block list, Max: 1) - if protocol is set to HTTP_GET

### Nested Schema for `readiness_probe`

Required:

- `initial_delay_seconds` (Number)
- `timeout_seconds` (Number)
- `period_seconds` (Number)
- `success_threshold` (Number)
- `failure_threshold` (Number)
- `protocol` (String) - Value can be TCP_SOCKET or HTTP_GET
- `tcp_socket` (Block list, Max: 1) - if protocol is set to TCP_SOCKET
- `http_get` (Block list, Max: 1) - if protocol is set to HTTP_GET

### Nested Schema for `tcp_socket`

Required:

- `port` (Number)

### Nested Schema for `http_get`

Required:

- `path` (String)
- `port` (Number)
- `scheme` (String) Value can be HTTP or HTTPS
- `http_headers` (Block List)

### Nested Schema for `http_headers`

Required:

- `header_name` (String)
- `header_value` (String)

<a id="nestedblock--network_interfaces"></a>

### Nested Schema for `network_interfaces`

Required:

- `vpc_slug` (String) - The vpc_slug of the VPC.
- `ip_families` (String) - ip_families type.
- `subnet_slug` (String) - The name of the subnet_slug.
- `is_public_ip` (Boolean) - Enable/Disable public Ip.


